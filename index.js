$(function(){var t=$("#user"),e=$("#phone"),l=$("#mima"),n=$("#yan"),i=$("#sub"),a=$("#btn");function o(t){var e=$(t),l=$(t+"-valid");if(console.log(t),1==t.indexOf("user")){if(""===e.val())return l.html("用户名不能为空"),void e.select();if(0==/^(?!(\d+)$)[\u4e00-\u9fff\w]+$/.test(e.val()))return l.html("用户名仅支持中英文、数字和下划线，且不能为纯数字"),void e.select()}if(1==t.indexOf("phone")){if(""===e.val())return l.html("手机号不能为空"),void e.select();if(0==/^((13[0-9])|(14[5,7])|(15[0-3,5-9])|(17[0,3,5-8])|(18[0-9])|166|198|199|(147))\d{8}$/.test(e.val()))return l.html("手机号码格式不正确"),void e.select()}if(1==t.indexOf("mima")){if(""===e.val())return l.html("密码不能为空"),void e.select();if(0==/^[a-zA-Z]\w{5,17}$/.test(e.val()))return l.html("以字母开头，长度在6~18之间，只能包含字母、数字和下划线"),void e.select()}return 1==t.indexOf("yan")&&""===e.val()?(console.log(1111),l.html("验证码不能为空"),void e.select()):(l.html(""),1)}i.click(function(){o("#user")&&o("#phone")&&o("#mima")&&o("#yan")}),a.click(function(){$("#btn").attr("disabled",!0),$("#yan-valid").html("");var t=20,e=setInterval(function(){return t<=0&&""==n.val()?(clearInterval(e),$("#btn").val("获取验证码"),$("#yan-valid").html("请求超时，请稍后再试"),$("#btn").attr("disabled",!1),!1):t<=0&&""!==n.val()?(clearInterval(e),$("#btn").val("获取验证码"),$("#btn").attr("disabled",!1),!1):void(0<=t&&$("#btn").val(t--+"s"))},1e3)}),e.focusout(function(){o("#phone")||e.select()}),l.focusout(function(){o("#mima")||l.select()}),t.focusout(function(){o("#user")||t.select()})});